#Tue Oct 07 13:17:36 UTC 2025

# Application name
micronaut.application.name=niloeducation-api

# ============================================
# TEST RESOURCES CONFIGURATION
# ============================================
# Disable test resources for development (using Docker infrastructure instead)
micronaut.test.resources.enabled=false

# Server configuration
micronaut.server.port=8082

# ============================================
# DATASOURCE CONFIGURATION
# ============================================
datasources.default.db-type=postgres
datasources.default.url=jdbc:postgresql://localhost:5432/niloeducation?TimeZone=UTC
datasources.default.username=${POSTGRES_USER:postgres}
datasources.default.password=${POSTGRES_PASSWORD:postgres}
datasources.default.driver-class-name=org.postgresql.Driver
datasources.default.dialect=POSTGRES
flyway.datasources.default.clean-disabled=false

# ============================================
# JPA/HIBERNATE CONFIGURATION
# ============================================
jpa.default.properties.hibernate.hbm2ddl.auto=none
jpa.default.properties.hibernate.jdbc.time_zone=UTC
jpa.default.properties.hibernate.show_sql=false
jpa.default.properties.hibernate.format_sql=true

# ============================================
# FLYWAY CONFIGURATION
# ============================================
flyway.datasources.default.enabled=true
flyway.datasources.default.locations=classpath:db/migration
flyway.datasources.default.baseline-on-migrate=true

# ============================================
# SECURITY CONFIGURATION
# ============================================
micronaut.security.authentication=cookie
micronaut.security.token.jwt.signatures.secret.generator.secret=${JWT_GENERATOR_SIGNATURE_SECRET:pleaseChangeThisSecretForANewOne}

# ============================================
# Configuraciï¿½n de Keycloak Admin API
# ============================================

# URL base de Keycloak
keycloak.server.url=http://localhost:8081
keycloak.realm=nilo

# Client para Admin API (Service Account)
keycloak.admin.client-id=niloeducation-admin
keycloak.admin.client-secret=${KEYCLOAK_ADMIN_SECRET}

# URLs de Keycloak
keycloak.token.url=${keycloak.server.url}/realms/${keycloak.realm}/protocol/openid-connect/token
keycloak.users.url=${keycloak.server.url}/admin/realms/${keycloak.realm}/users
keycloak.roles.url=${keycloak.server.url}/admin/realms/${keycloak.realm}/roles

# Timeout para llamadas a Keycloak
keycloak.client.timeout=30s

# ============================================
# METRICS CONFIGURATION
# ============================================
micronaut.metrics.enabled=true
micronaut.metrics.export.prometheus.enabled=true
micronaut.metrics.export.prometheus.step=PT1M
micronaut.metrics.export.prometheus.descriptions=true