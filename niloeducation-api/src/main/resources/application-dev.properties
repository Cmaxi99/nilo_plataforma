# ============================================
# DEV ENVIRONMENT - OAUTH2 CONFIGURATION
# ============================================

# OAuth2 Client Configuration for Keycloak
micronaut.security.oauth2.clients.keycloak.client-id=${OAUTH_CLIENT_ID:niloeducation-api}
micronaut.security.oauth2.clients.keycloak.client-secret=${OAUTH_CLIENT_SECRET:dev-secret-change-in-production}
micronaut.security.oauth2.clients.keycloak.openid.issuer=${OAUTH_ISSUER:http://localhost:8081/realms/nilo}

# Grant type
micronaut.security.oauth2.clients.keycloak.grant-type=authorization_code

# Scopes
micronaut.security.oauth2.clients.keycloak.scopes[0]=openid
micronaut.security.oauth2.clients.keycloak.scopes[1]=profile
micronaut.security.oauth2.clients.keycloak.scopes[2]=email

# Dev environment overrides
keycloak.server.url=http://localhost:8081

# ============================================
# SECURITY - PUBLIC ENDPOINTS
# ============================================
# Permitir acceso sin autenticación a endpoints públicos
micronaut.security.intercept-url-map[0].pattern=/
micronaut.security.intercept-url-map[0].access=isAnonymous()
micronaut.security.intercept-url-map[1].pattern=/health
micronaut.security.intercept-url-map[1].access=isAnonymous()
micronaut.security.intercept-url-map[2].pattern=/health/**
micronaut.security.intercept-url-map[2].access=isAnonymous()
micronaut.security.intercept-url-map[3].pattern=/swagger/**
micronaut.security.intercept-url-map[3].access=isAnonymous()
micronaut.security.intercept-url-map[4].pattern=/swagger-ui/**
micronaut.security.intercept-url-map[4].access=isAnonymous()
micronaut.security.intercept-url-map[5].pattern=/rapidoc/**
micronaut.security.intercept-url-map[5].access=isAnonymous()
micronaut.security.intercept-url-map[6].pattern=/redoc/**
micronaut.security.intercept-url-map[6].access=isAnonymous()
micronaut.security.intercept-url-map[7].pattern=/prometheus
micronaut.security.intercept-url-map[7].access=isAnonymous()

# ============================================
# OPENAPI/SWAGGER CONFIGURATION
# ============================================
micronaut.router.static-resources.swagger.paths=classpath:META-INF/swagger
micronaut.router.static-resources.swagger.mapping=/swagger/**

# Swagger UI (se genera automáticamente con openapi.properties)
micronaut.router.static-resources.swagger-ui.paths=classpath:META-INF/swagger/views/swagger-ui
micronaut.router.static-resources.swagger-ui.mapping=/swagger-ui/**
